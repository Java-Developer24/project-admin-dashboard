import{A as w,u as y,r,j as t,B as N,I as S,f as b,b as o,_ as l}from"./index--FpPv6_1.js";import{S as d}from"./Switch-ClYcvtk9.js";import"./index-BzNKqasO.js";import"./index-DiOThvEn.js";const M=()=>{const h=y(),[p,i]=r.useState([]),[f,x]=r.useState(!0),[u,m]=r.useState(!1),v=()=>h("/admin-panel"),c=localStorage.getItem("token");r.useEffect(()=>{(async()=>{try{const a=await o.get("/api/server/admin-api/server-data-get/get-server",{headers:{Authorization:`Bearer ${c}`}});i(a.data);const n=a.data.find(s=>s.server===0);m((n==null?void 0:n.maintenance)||!1)}catch(a){a.response?l.error(a.response.data.message||"Failed to update OTP check setting"):a.request?l.error("No response received from server"):l.error(`Error: ${a.message}`)}finally{x(!1)}})()},[]);const g=async e=>{try{await o.post("/api/service/admin-api/servers-maintence/maintenance-all-servers",{server:0,maintenance:e},{headers:{Authorization:`Bearer ${c}`}}),m(e),i(a=>a.map(n=>n.server!==0?{...n,maintenance:e}:n))}catch(a){console.error("Failed to update master maintenance status:",a)}},j=async(e,a)=>{try{await o.post("/api/service/admin-api/getting-server-maintaince/maintainance-server",{serverNumber:e,maintenance:a},{headers:{Authorization:`Bearer ${c}`}}),i(n=>n.map(s=>s.server===e?{...s,maintenance:a}:s))}catch(n){console.error("Failed to update server maintenance status:",n)}};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-full my-2",children:t.jsxs(N,{variant:"link",onClick:v,className:"text-sm font-normal text-[#8C8C8C] !no-underline p-1 h-0 flex gap-2",children:[t.jsx(S.arrowLeft,{className:"w-4 h-4"})," Maintenance"]})}),t.jsx("div",{className:"flex items-center justify-center pt-[1rem]",children:t.jsxs("div",{className:"bg-transparent w-full max-w-md rounded-lg mb-[60px] border-none dark",children:[t.jsxs("div",{className:"w-full flex items-center justify-between px-4",children:[t.jsx("h5",{className:"font-normal text-base text-[#757575]",children:"Master Maintenance"}),t.jsx(d,{checked:u,onCheckedChange:e=>g(e)})]}),t.jsx("div",{className:"flex flex-col items-center gap-2",children:f?t.jsx("div",{children:"Loading..."}):p.filter(e=>e.server!==0).map(e=>t.jsxs("div",{className:b({variant:"login",className:"w-full text-sm font-normal h-14 text-white !bg-[#282828] !hover:bg-[#282828] !justify-between !transform-none"}),children:["Server ",e.server,t.jsx(d,{checked:e.maintenance,onCheckedChange:a=>j(e.server,a)})]},e.server))})]})})]})},E=w()(M);export{E as default};
