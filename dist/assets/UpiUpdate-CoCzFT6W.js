import{A as E,r as i,u as A,j as e,B as d,I as S,b as c,_ as s}from"./index--FpPv6_1.js";import{I as p}from"./Input-C-s0KhfE.js";import{L as u}from"./Label-B-Rr7N0l.js";import"./index-ny5ticeX.js";import"./index-DiOThvEn.js";const C=()=>{const[g,f]=i.useState(""),[U,j]=i.useState(""),[b,v]=i.useState(""),[N,P]=i.useState(""),[l,B]=i.useState(null),m=localStorage.getItem("token"),F=A(),w=()=>c.get("/api/recharge/admin-api/recharge-api-data/get-recharge-api?type=upi",{headers:{Authorization:`Bearer ${m}`}}).then(r=>{P(r.data.api_key)}).catch(r=>{console.error("Error fetching servers:",r),r.response?s.error(r.response.data.message||"Failed to update OTP check setting"):r.request?s.error("No response received from server"):s.error(`Error: ${r.message}`)});i.useEffect(()=>{w()},[]);const y=()=>c.get("/api/config/admin-api/upi-min-amt/min-upi-amount").then(r=>{j(r.data.minUpiAmount)}).catch(r=>{console.error("Error fetching servers:",r),r.response?s.error(r.response.data.message||"Failed to update OTP check setting"):r.request?s.error("No response received from server"):s.error(`Error: ${r.message}`)});i.useEffect(()=>{y()},[]);const h=()=>F("/admin-panel"),k=async r=>{r.preventDefault();const x=new Promise((a,o)=>{(async()=>{try{const t=await c.post("/api/config/admin-api/min-upi-amt-update/min-upi-amount",{minUpiAmount:b},{headers:{Authorization:`Bearer ${m}`}});v(""),y(),a(t)}catch(t){t.response?s.error(t.response.data.message||"Failed to update OTP check setting"):t.request?s.error("No response received from server"):s.error(`Error: ${t.message}`),o(t)}})()});await s.promise(x,{loading:"updating upi...",success:a=>a.data.message,error:a=>{var n,t;return((t=(n=a.response)==null?void 0:n.data)==null?void 0:t.error)||"Error updating upi. Please try again."}})},I=async r=>{r.preventDefault();const x=new Promise((a,o)=>{(async()=>{try{const t=await c.post("/api/recharge/admin-api/recharge-data-update-api/update-recharge-api",{recharge_type:"upi",newUpiId:g},{headers:{Authorization:`Bearer ${m}`}});f(""),w(),a(t)}catch(t){t.response?s.error(t.response.data.message||"Failed to update OTP check setting"):t.request?s.error("No response received from server"):s.error(`Error: ${t.message}`),o(t)}})()});await s.promise(x,{loading:"updating upi...",success:a=>a.data.message,error:a=>{var n,t;return((t=(n=a.response)==null?void 0:n.data)==null?void 0:t.error)||"Error updating upi. Please try again."}})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full my-4 flex items-center justify-between",children:e.jsxs(d,{variant:"link",onClick:h,className:"text-sm font-normal text-[#8C8C8C] !no-underline p-1 h-0 flex gap-2",children:[e.jsx(S.arrowLeft,{className:"w-4 h-4"})," Update UPI"]})}),e.jsx("div",{className:"flex items-center justify-center pt-[1rem]",children:e.jsxs("div",{className:"bg-transparent w-full max-w-md rounded-lg mb-[60px] border-none dark",children:[e.jsxs("form",{onSubmit:I,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"currentUpi",className:"block text-base text-[#9d9d9d] font-normal py-3",children:"Current UPI"}),e.jsx(p,{id:"currentUpi",type:"text",disabled:!0,className:"w-full h-12 pl-3 rounded-lg disabled:text-white disabled:!border-[#e0effe] focus:border-none disabled:opacity-100 disabled:bg-[#9D9D9D]/50",value:N})]}),!l&&e.jsxs("div",{children:[e.jsx(u,{htmlFor:"newUpi",className:"block text-base text-[#9d9d9d] font-normal py-3",children:"Enter New UPI"}),e.jsx(p,{id:"newUpi",type:"text",placeholder:"Enter new UPI",className:"w-full h-12 pl-3 rounded-lg text-[#9d9d9d] !placeholder-[#9d9d9d] bg-transparent border-[#e0effe] focus:border-none",required:!0,value:g,onChange:r=>f(r.target.value)})]})]}),!l&&e.jsxs("div",{className:"w-full flex items-center justify-center gap-4 mt-8",children:[e.jsx(d,{type:"submit",className:"py-1 px-8 text-xs bg-[#129BFF] text-white hover:bg-[#129BFF]",children:"Save"}),e.jsx(d,{type:"button",className:"py-1 px-6 text-xs !rounded-md border-2 border-white font-normal hover:!bg-white hover:text-black transition-colors duration-200 ease-in-out",onClick:h,children:"Cancel"})]})]}),e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"currentUpi",className:"block text-base text-[#9d9d9d] font-normal py-3",children:"Current UPI Min Value"}),e.jsx(p,{id:"currentUpi",type:"text",disabled:!0,className:"w-full h-12 pl-3 rounded-lg disabled:text-white disabled:!border-[#e0effe] focus:border-none disabled:opacity-100 disabled:bg-[#9D9D9D]/50",value:U})]}),!l&&e.jsxs("div",{children:[e.jsx(u,{htmlFor:"newUpi",className:"block text-base text-[#9d9d9d] font-normal py-3",children:"Enter New UPI Min Value"}),e.jsx(p,{id:"newUpi",type:"text",placeholder:"Enter new UPI",className:"w-full h-12 pl-3 rounded-lg text-[#9d9d9d] !placeholder-[#9d9d9d] bg-transparent border-[#e0effe] focus:border-none",required:!0,value:b,onChange:r=>v(r.target.value)})]})]}),!l&&e.jsxs("div",{className:"w-full flex items-center justify-center gap-4 mt-8",children:[e.jsx(d,{type:"submit",className:"py-1 px-8 text-xs bg-[#129BFF] text-white hover:bg-[#129BFF]",children:"Save"}),e.jsx(d,{type:"button",className:"py-1 px-6 text-xs !rounded-md border-2 border-white font-normal hover:!bg-white hover:text-black transition-colors duration-200 ease-in-out",onClick:h,children:"Cancel"})]})]})]})})]})},L=E()(C);export{L as default};
