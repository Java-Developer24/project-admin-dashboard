import{j as e,A as J,u as V,a as W,r as n,B as c,I as p,S as Q,b as x,_ as g}from"./index--FpPv6_1.js";import{I as A}from"./Input-C-s0KhfE.js";import{S as X}from"./Switch-ClYcvtk9.js";import{h as Z}from"./moment-C5S46NFB.js";import"./index-BzNKqasO.js";import"./index-DiOThvEn.js";const ee=({children:d,isOpen:l,onClose:a,title:u})=>l?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray bg-opacity-60 ",children:e.jsxs("div",{className:"bg-black w-[90%] max-w-md rounded-lg shadow-xl overflow-hidden transform transition-all duration-300 scale-95 hover:scale-100 border-2 border-gray-400",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-700 bg-black",children:[e.jsx("h3",{className:"text-white text-lg font",children:u}),e.jsxs("button",{onClick:a,className:"text-white hover:text-green-500 transition",children:[e.jsx("span",{className:"sr-only",children:"Close"}),"âœ•"]})]}),e.jsx("div",{className:"p-6 text-white",children:d}),e.jsx("div",{className:"p-4 bg-black rounded-b-lg"})]})}):null,se=()=>{const d=V(),{id:l}=W(),[a,u]=n.useState({}),[m,D]=n.useState(!1),[S,j]=n.useState(!1),[N,w]=n.useState(""),[y,k]=n.useState(!1),[v,B]=n.useState(""),[F,f]=n.useState(!1),[I,E]=n.useState(""),[$,P]=n.useState(!0),M=()=>d("/users-data"),i=localStorage.getItem("token"),C=async()=>{try{const s=await x.get(`/api/user/user-admin-api/get-user?userId=${l}`,{headers:{Authorization:`Bearer ${i}`}});u(s.data),D(s.data.blocked),w(s.data.balance),B(s.data.dbBalance||""),P(!1)}catch{console.error("Failed to fetch user data")}};n.useEffect(()=>{C()},[l]);const R=async()=>{try{const s=await x.get("/api/user/admin-api/user-block-data/get-all-blocked-users",{headers:{Authorization:`Bearer ${i}`}});if(s.data){const r=s.data.find(h=>h.email);r?(E(r.blocked_reason),f(!0)):g.error("No block details found for this user.")}else console.error("Failed to fetch block details:",s.data.message)}catch(s){console.error("Error fetching block details:",s)}},U=async()=>{try{const s={userId:l,blocked:!m,blocked_reason:m?null:"Blocked by Admin"};(await x.post("/api/user/admin-api/user-block-status-update/block-user",s,{headers:{Authorization:`Bearer ${i}`}})).data.status==="SUCCESS"&&(D(!m),f(!1),g.success("User block status updated successfully."))}catch(s){console.error("Failed to update block status:",s)}},_=()=>{m?R():U()},z=()=>{w(a.balance),j(!0)},L=s=>{w(s.target.value)},T=async()=>{try{(await x.post("/api/user/admin-api/user-balance-change/update-user-balance",{userId:l,new_balance:parseFloat(N)},{headers:{Authorization:`Bearer ${i}`}})).status===200&&(u(r=>({...r,balance:N})),j(!1))}catch(s){console.error("Failed to update balance:",s)}},q=()=>{B(a.balance),k(!0)},Y=s=>{B(s.target.value)},K=async()=>{try{(await x.post("/api/user/admin-api/user-db-balance-change/update-user-balances",{userId:l,new_db_balance:parseFloat(v)},{headers:{Authorization:`Bearer ${i}`}})).status===200&&(u(r=>({...r,dbBalance:v})),k(!1),C())}catch(s){console.error("Failed to update DBbalance:",s)}},O=()=>{d(`/orders/${l}`)},H=async()=>{const s=new Promise((r,h)=>{(async()=>{try{const t=await x.delete(`/api/block/admin-api/user-block-fraud/data-clear/block-fraud-clear?userId=${l}`,{headers:{Authorization:`Bearer ${i}`}});t.status===200&&C(),r(t)}catch(t){h(t)}})()});await g.promise(s,{loading:"Deleting Data...",success:r=>r.data.message,error:r=>{var b,t;return((t=(b=r.response)==null?void 0:b.data)==null?void 0:t.error)||"Error Deleting data. Please try again."}})},G=async()=>{const s=new Promise((r,h)=>{(async()=>{try{const t=await x.delete(`/api/user/admin-api/user-acct-remove/delete-user-account?userId=${l}`,{headers:{Authorization:`Bearer ${i}`}});t.status===200&&d("/users-data"),r(t)}catch(t){h(t)}})()});await g.promise(s,{loading:"Deleting Data...",success:r=>r.data.message,error:r=>{var b,t;return((t=(b=r.response)==null?void 0:b.data)==null?void 0:t.error)||"Error Deleting data. Please try again."}})},o={wordBreak:"break-word",whiteSpace:"normal",overflowWrap:"break-word"};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full my-4 flex items-center justify-between",children:e.jsxs(c,{variant:"link",onClick:M,className:"text-sm font-normal text-[#8C8C8C] !no-underline p-1 h-0 flex gap-2",children:[e.jsx(p.arrowLeft,{className:"w-4 h-4"})," User Data Details"]})}),$?e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx(Q,{})}):e.jsx("div",{className:"flex items-center justify-center pt-[1rem]",children:e.jsxs("div",{className:"bg-transparent w-full max-w-md rounded-lg mb-[60px] border-none dark",children:[e.jsxs("div",{className:"w-full flex items-center justify-between px-4",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("h5",{className:"font-normal text-[#757575]",children:"Block on/off"}),e.jsx(X,{checked:m,onCheckedChange:_})]}),e.jsxs(ee,{isOpen:F,onClose:()=>f(!1),title:"Block Reason",children:[e.jsx("p",{className:"text-white font- text-lg mb-4",children:I}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(c,{className:" py-2 bg-red-600 hover:bg-red-500 text-white font-heavy  rounded-lg ",onClick:()=>f(!1),children:"Cancel"}),e.jsx(c,{className:" bg-green-600 hover:bg-green-500 text-white font  rounded-lg",onClick:U,children:"Unblock User"})]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("h5",{className:"font-normal text-[#757575]",children:"Delete User Data"}),e.jsx(p.trash,{className:"w-5 h-5 cursor-pointer text-red-600",onClick:H})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[e.jsx("h5",{className:"font-normal text-[#757575]",children:"Delete User"}),e.jsx(p.trash,{className:"w-5 h-5 cursor-pointer text-red-600",onClick:G})]})]}),e.jsx("div",{className:"mt-[1.5rem] w-full border-[10px] border-[#444444] rounded-lg",children:e.jsx("table",{className:"w-full table-auto",children:e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b-2 border-[#949494] p-3",children:[e.jsx("td",{className:"border-b-2 border-[#949494] p-3 px-5 text-[#959595]",children:"User ID"}),e.jsx("td",{className:"border-b-2 border-[#949494] p-3",style:o,children:a._id})]}),e.jsxs("tr",{className:"border-b-2 border-[#949494] p-3",children:[e.jsx("td",{className:"border-b-2 border-[#949494] p-3 px-5 text-[#959595]",children:"Email"}),e.jsx("td",{className:"border-b-2 border-[#949494] p-3",style:o,children:a.email})]}),e.jsxs("tr",{className:"border-b-2 border-[#949494] p-3",children:[e.jsx("td",{className:"border-b-2 border-[#949494] p-3 px-5 text-[#959595]",children:"Login Type"}),e.jsx("td",{className:"border-b-2 border-[#949494] p-3",style:o,children:a.googleId?"Google":"Email"})]}),e.jsxs("tr",{className:"border-b-2 border-[#949494] p-3",children:[e.jsx("td",{className:"border-b-2 border-[#949494] p-3 px-5 text-[#959595]",children:"User Password"}),e.jsx("td",{className:"border-b-2 border-[#949494] p-3",style:o,children:a.userPassword?a.userPassword:"N/A"})]}),e.jsxs("tr",{className:"border-b-2 border-[#949494] p-3 w-full",children:[e.jsx("td",{className:"border-b-2 border-[#949494] p-3 px-4 text-[#959595]",children:"Balance"}),e.jsx("td",{className:"border-b-2  p-3 flex items-center justify-between",style:o,children:S?e.jsx(A,{type:"number",value:N,onChange:L,className:"w-full p-2 border rounded-md no-arrows mr-5"}):a.balance}),e.jsx("td",{children:e.jsx(p.edit,{className:"text-white cursor-pointer w-5 h-5",onClick:z})})]}),e.jsxs("tr",{className:"border-b-2 border-[#949494] p-3",children:[e.jsx("td",{className:"border-b-2 border-[#949494] p-3 px-5 text-[#959595]",children:"DB Balance"}),e.jsx("td",{className:"border-b-2 border-[#949494] p-3",style:o,children:y?e.jsx(A,{type:"number",value:v,onChange:Y,className:"w-full p-2 border rounded-md no-arrows"}):a.balance}),e.jsx("td",{children:!y&&e.jsx(p.edit,{className:"text-white cursor-pointer w-5 h-5 mr-3",onClick:q})})]}),e.jsxs("tr",{className:"border-b-2 border-[#949494] p-3",children:[e.jsx("td",{className:"border-b-2 border-[#949494] p-3 px-5 text-[#959595]",children:"Api Key"}),e.jsx("td",{className:"border-b-2 border-[#949494] p-3",style:o,children:a.api_key})]}),e.jsxs("tr",{className:"border-b-2 border-[#949494] p-3",children:[e.jsx("td",{className:"border-b-2 border-[#949494] p-3 px-5 text-[#959595]",children:"Trx Address"}),e.jsx("td",{className:"border-b-2 border-[#949494] p-3",style:o,children:a.trxAddress})]}),e.jsxs("tr",{className:"border-b-2 border-[#949494] p-3",children:[e.jsx("td",{className:"border-b-2 border-[#949494] p-3 px-5 text-[#959595]",children:"Trx Private Key"}),e.jsx("td",{className:"border-b-2 border-[#949494] p-3",style:o,children:a.trxPrivateKey})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-3 px-5 text-[#959595]",children:"Joined"}),e.jsx("td",{className:"p-3",style:o,children:Z(a.createdAt).format("DD/MM/YYYY hh:mm:ss A")})]})]})})}),e.jsxs("div",{className:"flex justify-center w-full h-full mt-6  ",children:[e.jsx(c,{className:"  py-6 bg-green-600 hover:bg-green-500 text-white font  rounded-lg",onClick:()=>d(`/recharge-history/${l}`),children:"Recharge History"}),e.jsx(c,{className:"py-6 ml-7 bg-green-600 hover:bg-green-500 text-white font rounded-lg transition",onClick:O,children:"My Orders"}),e.jsx(c,{className:" py-6    ml-8 bg-green-600 hover:bg-green-500 text-white font rounded-lg transition",onClick:()=>d(`/sms-history/${l}`),children:"SMS History"})]}),y&&e.jsxs("div",{className:"w-full flex items-center justify-center gap-4 mt-8",children:[e.jsx(c,{onClick:K,className:"py-1 px-8 text-xs bg-[#129BFF] text-white hover:bg-[#129BFF]",children:"Save"}),e.jsx(c,{onClick:()=>k(!1),className:"py-1 px-6 text-xs !rounded-md border-2 border-white font-normal hover:!bg-white hover:text-black transition-colors duration-200 ease-in-out",children:"Cancel"})]}),S&&e.jsxs("div",{className:"w-full flex items-center justify-center gap-4 mt-8",children:[e.jsx(c,{className:"py-1 px-8 text-xs bg-[#129BFF] text-white hover:bg-[#129BFF]",onClick:T,children:"Save"}),e.jsx(c,{className:"py-1 px-6 text-xs !rounded-md border-2 border-white font-normal hover:!bg-white hover:text-black transition-colors duration-200 ease-in-out",onClick:()=>j(!1),children:"Cancel"})]})]})})]})},ce=J()(se);export{ce as default};
