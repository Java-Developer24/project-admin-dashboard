import{A as _,u as q,r as a,j as e,B as i,I as V,b as h,_ as x}from"./index--FpPv6_1.js";import{I as d}from"./Input-C-s0KhfE.js";import{L as l}from"./Label-B-Rr7N0l.js";import{S as G,a as O,b as H,c as J,d as Q,f as W,e as X}from"./Select-DDdZlMlL.js";import"./index-ny5ticeX.js";import"./index-DiOThvEn.js";import"./index-BzNKqasO.js";const Y=()=>{var F;const f=q(),[m,p]=a.useState(""),[u,ee]=a.useState(!1),[A,E]=a.useState(""),[I,C]=a.useState(""),[s,b]=a.useState("1"),[v,j]=a.useState([]),[R,te]=a.useState(""),[B,D]=a.useState(""),o=localStorage.getItem("token"),[M,T]=a.useState(""),[y,w]=a.useState(""),[P,K]=a.useState(""),[N,S]=a.useState("");a.useEffect(()=>{(async()=>{try{const n=(await h.get("/api/server/admin-api/server-data-get/get-server",{headers:{Authorization:`Bearer ${o}`}})).data.filter(c=>!c.maintainance&&c.server!==0);j(n),n.length>0&&b("1"),n.length>0&&g("1")}catch(r){console.error("Failed to fetch servers:",r),r.response?x.error(r.response.data.message||"Failed to update OTP check setting"):r.request?x.error("No response received from server"):x.error(`Error: ${r.message}`)}})()},[]);const g=async t=>{try{const n=(await h.get("/api/server/admin-api/server-data-get/get-server",{headers:{Authorization:`Bearer ${o}`}})).data.find(c=>c.server===parseInt(t));n&&(T(n.exchangeRate||""),K(n.margin||""))}catch(r){console.error("Failed to fetch exchange rate and margin:",r)}},k=()=>f("/admin-panel"),$=t=>{b(t),p(""),t==="9"&&fetchTokenForServer9(),g(t)},U=async t=>{t.preventDefault();try{await h.post("/api/server/admin-api/api-key-change/update-api-key",{server:s,api_key:m},{headers:{Authorization:`Bearer ${o}`}});const n=(await h.get("/api/server/admin-api/server-data-get/get-server",{headers:{Authorization:`Bearer ${o}`}})).data.filter(c=>!c.maintainance&&c.server!==0);j(n),n.length>0&&b("1"),p(""),x.success("API Key updated successfully")}catch(r){console.error("Error updating API:",r)}},z=async t=>{t.preventDefault();try{await h.post("/api/server/admin-api/exchange-rate-change/update-exchange-rate",{server:s,exchangeRate:y},{headers:{Authorization:`Bearer ${o}`}}),g(s),w(""),x.success("Exchange rate updated successfully")}catch(r){console.error("Error updating exchange rate:",r)}},L=async t=>{t.preventDefault();try{await h.post("/api/server/admin-api/margin-amt-change/update-margin-amount",{server:s,margin:N},{headers:{Authorization:`Bearer ${o}`}}),g(s),S(""),x.success("Margin updated successfully")}catch(r){console.error("Error updating margin:",r)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full my-4 flex items-center justify-between",children:e.jsxs(i,{variant:"link",onClick:k,className:"text-sm font-normal text-[#8C8C8C] !no-underline p-1 h-0 flex gap-2",children:[e.jsx(V.arrowLeft,{className:"w-4 h-4"})," Update API"]})}),e.jsx("div",{className:"flex items-center justify-center pt-[1rem]",children:e.jsxs("div",{className:"bg-transparent w-full max-w-md rounded-lg mb-[60px] border-none dark",children:[e.jsx("div",{className:"flex justify-end"}),u?e.jsxs("form",{onSubmit:handleAddServerSubmit,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"serverNumber",className:"block text-base text-[#9d9d9d] font-normal py-2",children:"Server Number"}),e.jsx(d,{id:"serverNumber",type:"text",placeholder:"Enter server number",className:"w-full h-12 pl-3 rounded-lg text-[#9d9d9d] !placeholder-[#9d9d9d] bg-transparent border-[#e0effe] focus:border-none",value:A,onChange:t=>E(t.target.value)})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"apiKey",className:"block text-base text-[#9d9d9d] font-normal py-2",children:"API Key"}),e.jsx(d,{id:"apiKey",type:"text",placeholder:"Enter API Key",className:"w-full h-12 pl-3 rounded-lg text-[#9d9d9d] !placeholder-[#9d9d9d] bg-transparent border-[#e0effe] focus:border-none",value:I,onChange:t=>C(t.target.value)})]})]}),e.jsx("div",{className:"w-full flex items-center justify-center gap-4 mt-8",children:e.jsx(i,{className:"py-1 px-8 w-[50%] text-xs bg-[#129BFF] text-white hover:bg-[#129BFF]",children:"Save"})})]}):e.jsxs("form",{onSubmit:s==="9"?handleTokenSubmit:U,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"block text-base text-[#9d9d9d] font-normal pt-3",children:"Select Server"}),e.jsx(Z,{selectedServer:s,onServerChange:$,servers:v}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"currentApi",className:"block text-base text-[#9d9d9d] font-normal py-3",children:"Current API"}),e.jsx(d,{id:"currentApi",type:"text",disabled:!0,className:"w-full h-12 pl-3 rounded-lg disabled:text-white disabled:!border-[#e0effe] focus:border-none disabled:opacity-100 disabled:bg-[#9D9D9D]/50",value:((F=v.find(t=>t.server===parseInt(s)))==null?void 0:F.api_key)||""})]}),s!=="9"&&e.jsxs("div",{children:[e.jsx(l,{htmlFor:"newApi",className:"block text-base text-[#9d9d9d] font-normal py-3",children:"Enter New API"}),e.jsx(d,{id:"newApi",type:"text",placeholder:"Enter new API Key",className:"w-full h-12 pl-3 rounded-lg text-[#9d9d9d] !placeholder-[#9d9d9d] bg-transparent border-[#e0effe] focus:border-none",value:m,onChange:t=>p(t.target.value)})]}),s==="9"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"currentToken",className:"block text-base text-[#9d9d9d] font-normal py-3",children:"Current Token"}),e.jsx(d,{id:"currentToken",type:"text",disabled:!0,className:"w-full h-12 pl-3 rounded-lg disabled:text-white disabled:!border-[#e0effe] focus:border-none disabled:opacity-100 disabled:bg-[#9D9D9D]/50",value:R||""})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"newToken",className:"block text-base text-[#9d9d9d] font-normal py-3",children:"Enter New Token"}),e.jsx(d,{id:"newToken",type:"text",placeholder:"Enter new token",className:"w-full h-12 pl-3 rounded-lg text-[#9d9d9d] !placeholder-[#9d9d9d] bg-transparent border-[#e0effe] focus",value:B,onChange:t=>D(t.target.value)})]})]})]}),e.jsxs("div",{className:"w-full flex items-center justify-center gap-4 mt-8",children:[e.jsx(i,{className:"py-1 px-8 text-xs bg-[#129BFF] text-white hover:bg-[#129BFF]",children:"Save"}),e.jsx(i,{className:"py-1 px-6 text-xs !rounded-md border-2 border-white font-normal hover:!bg-white hover:text-black transition-colors duration-200 ease-in-out",type:"button",onClick:k,children:"Cancel"})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Update Exchange Rate"}),e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"currentExchangeRate",className:"block text-base text-[#9d9d9d] font-normal py-2",children:"Exchange Rate"}),e.jsx(d,{id:"currentExchangeRate",type:"text",value:M,disabled:!0,className:"w-full h-12 pl-3 rounded-lg disabled:text-white disabled:!border-[#e0effe] focus:border-none disabled:opacity-100 disabled:bg-[#9D9D9D]/50"})]}),e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"newExchangeRate",className:"block text-base text-[#9d9d9d] font-normal py-2",children:"New Exchange Rate"}),e.jsx(d,{id:"newExchangeRate",type:"text",required:!0,placeholder:"Enter new exchange rate",className:"w-full h-12 pl-3 rounded-lg text-[#9d9d9d] bg-transparent border-[#e0effe] focus:border-none",value:y,onChange:t=>w(t.target.value)})]}),e.jsx("div",{className:"w-full flex items-center justify-center gap-4 mt-8",children:e.jsx(i,{className:"py-1 px-8 w-[50%] text-xs bg-[#129BFF] text-white hover:bg-[#129BFF]",children:"Update Exchange Rate"})})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Update Margin"}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"currentMargin",className:"block text-base text-[#9d9d9d] font-normal py-2",children:"Margin"}),e.jsx(d,{id:"currentMargin",type:"text",value:P,disabled:!0,className:"w-full h-12 pl-3 rounded-lg disabled:text-white disabled:!border-[#e0effe] focus:border-none disabled:opacity-100 disabled:bg-[#9D9D9D]/50"})]}),e.jsxs("form",{onSubmit:L,className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"newMargin",className:"block text-base text-[#9d9d9d] font-normal py-2",children:"New Margin"}),e.jsx(d,{id:"newMargin",required:!0,type:"text",placeholder:"Enter new margin",className:"w-full h-12 pl-3 rounded-lg text-[#9d9d9d] bg-transparent border-[#e0effe] focus:border-none",value:N,onChange:t=>S(t.target.value)})]}),e.jsx("div",{className:"w-full flex items-center justify-center gap-4 mt-8",children:e.jsx(i,{className:"py-1 px-8 w-[50%] text-xs bg-[#129BFF] text-white hover:bg-[#129BFF]",children:"Update Margin"})})]})]})]})})]})},Z=({selectedServer:f,onServerChange:m,servers:p})=>e.jsxs(G,{onValueChange:m,value:f,children:[e.jsx(O,{className:"w-full dark bg-[#282828]",children:e.jsx(H,{placeholder:"Select Server"})}),e.jsx(J,{className:"dark bg-[#1e1e1e]",children:e.jsxs(Q,{children:[e.jsx(W,{className:"text-[#9d9d9d]",children:"Select Available Server"}),p.map(u=>e.jsxs(X,{value:u.server.toString(),className:"text-[#9d9d9d]",children:["Server ",u.server]},u.server))]})})]}),oe=_()(Y);export{oe as default};
