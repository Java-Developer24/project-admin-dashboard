import{A as I,r,u as E,j as e,B as j,I as n,b as P}from"./index--FpPv6_1.js";import{S as $,a as U,b as F,c as Q,d as R,f as T,e as i}from"./Select-DDdZlMlL.js";import"./index-BzNKqasO.js";import"./index-DiOThvEn.js";const V=({limit:t,onLimitChange:d})=>e.jsxs($,{value:String(t),onValueChange:d,children:[e.jsx(U,{className:"w-[px] dark bg-transparent",children:e.jsx(F,{children:t})}),e.jsx(Q,{className:"dark bg-[#1e1e1e]",children:e.jsxs(R,{children:[e.jsx(T,{className:"font-normal",children:"Limit"}),e.jsx(i,{value:"10",children:"10"}),e.jsx(i,{value:"20",children:"20"}),e.jsx(i,{value:"30",children:"30"}),e.jsx(i,{value:"50",children:"50"})]})})]}),q=()=>{const[t,d]=r.useState(10),[a,l]=r.useState(1),[x,m]=r.useState(""),[f,g]=r.useState([]),u=E(),b=localStorage.getItem("token"),C=async()=>{try{const o=await(await P.get("/api/user/admin-api/user-discount-data/get-all-user-discount",{headers:{Authorization:`Bearer ${b}`}})).data;g(o)}catch(s){console.error("Failed to fetch user discounts:",s)}};r.useEffect(()=>{C()},[]);const N=()=>u("/discount"),w=s=>{m(s.target.value),l(1)},v=()=>{m("")},y=s=>{d(Number(s)),l(1)},S=()=>{a*t<c.length&&l(a+1)},k=()=>{a>1&&l(a-1)},h=(a-1)*t,p=new Set,c=f.filter(({userId:{email:s}})=>p.has(s.toLowerCase())?!1:(p.add(s.toLowerCase()),!0)).filter(({userId:{email:s}})=>s.toLowerCase().includes(x.toLowerCase())),L=c.slice(h,h+t),B=()=>{u("/discount/user/add-discount")},D=s=>{u(`/discount/user/${s}`)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full my-2 flex items-center justify-between",children:[e.jsxs(j,{variant:"link",onClick:N,className:"text-sm font-normal text-[#8C8C8C] !no-underline p-1 h-0 flex gap-2",children:[e.jsx(n.arrowLeft,{className:"w-4 h-4"})," Discount"]}),e.jsxs("div",{className:"flex items-center gap-2 font-normal",children:[e.jsx("p",{className:"text-sm text-[#8C8C8C]",children:"Limit:"}),e.jsx(V,{limit:t,onLimitChange:y})]})]}),e.jsxs("div",{className:"flex flex-col items-center pt-[1rem]",children:[e.jsxs("div",{className:"bg-transparent w-full max-w-md rounded-lg mb-[60px] border-none dark",children:[e.jsxs("div",{className:"w-full flex bg-[#18191c] rounded-2xl px-2 items-center justify-center h-[50px] mb-3",children:[e.jsx(n.search,{className:"w-4 h-4 text-primary"}),e.jsx("input",{type:"text",placeholder:"Search...",value:x,onChange:w,className:"w-[85%] h-[50px] ml-2 text-sm bg-transparent border-0 text-white placeholder:text-primary focus:outline-none"}),x!==""?e.jsx(n.circleX,{className:"text-primary cursor-pointer",onClick:v}):""]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(100vh-17rem)] text-left",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 font-normal text-[#8C8C8C]",children:"SL No"}),e.jsx("th",{className:"p-3  font-normal text-[#8C8C8C]",children:"Email"})]})}),e.jsx("tbody",{children:L.map(({userId:{email:s,_id:o}},A)=>e.jsxs("tr",{onClick:()=>D(o),className:"cursor-pointer",children:[e.jsx("td",{className:"border-t-2 border-[#4B4B4B] p-3",children:h+A+1}),e.jsx("td",{className:"border-t-2 border-[#4B4B4B] p-3",children:s})]},o))})]})})]}),e.jsxs("div",{className:"w-full max-w-2xl mt-4 flex justify-between fixed bottom-0 p-6 bg-black",children:[e.jsx(j,{className:"py-1 px-6 text-xs !rounded-md border-2 border-white font-normal hover:!bg-white hover:text-black transition-colors duration-200 ease-in-out",onClick:B,children:"Add Discount"}),e.jsxs("div",{children:[e.jsx("button",{onClick:k,className:`px-4 py-2 ${a===1?"text-gray-500 cursor-not-allowed":""}`,disabled:a===1,children:e.jsx(n.left,{})}),e.jsx("button",{onClick:S,className:`px-4 py-2 ${a*t>=c.length?"text-gray-500 cursor-not-allowed":""}`,disabled:a*t>=c.length,children:e.jsx(n.right,{})})]})]})]})]})},J=I()(q);export{J as default};
