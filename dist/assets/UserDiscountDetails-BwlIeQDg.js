import{A as B,a as g,u as C,r as n,d as w,j as e,B as l,I as u,b as x}from"./index--FpPv6_1.js";const v=()=>{const r=g().id,c=C(),[d,h]=n.useState(""),[f,i]=n.useState([]),{setEmail:j}=w(),o=localStorage.getItem("token");n.useEffect(()=>{(async()=>{try{const s=await(await x.get(`/api/user/admin-api/user-discount-data/get-user-discount-details?userId=${r}`,{headers:{Authorization:`Bearer ${o}`}})).data;s.length>0&&(h(s[0].userId.email),i(s))}catch(a){console.error("Failed to fetch user discounts:",a)}})()},[r]);const p=async(t,a)=>{try{await x.delete(`/api/user/admin-api/user-discount-data-removal/delete-user-discount?userId=${r}&service=${t}&server=${a}`,{headers:{Authorization:`Bearer ${o}`}}),i(s=>s.filter(m=>m.userId.service!==t||m.userId.server!==a))}catch(s){console.error("Failed to delete discount:",s)}},b=()=>c("/discount/"),N=()=>{j(d),c("/discount/user/add-discount")};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full my-4 flex items-center justify-between",children:e.jsxs(l,{variant:"link",onClick:b,className:"text-sm font-normal text-[#8C8C8C] !no-underline p-1 h-0 flex gap-2",children:[e.jsx(u.arrowLeft,{className:"w-4 h-4"})," User Discount"]})}),e.jsx("div",{className:"flex items-center justify-center pt-[1rem]",children:e.jsx("div",{className:"bg-transparent w-full max-w-md rounded-lg mb-[60px] border-none dark",children:e.jsxs("div",{className:"bg-[#484848] py-4 px-6 flex mb-4 w-full flex-col gap-4 items-center justify-between rounded-lg my-4",children:[e.jsxs("div",{className:"border-b border-[#ADADAD] flex items-center justify-between w-full px-4",children:[e.jsx("h3",{className:"font-medium text-sm tmd:ext-base pr-8",children:"Email"}),e.jsx("p",{className:"font-normal text-base text-[#9B9B9B]",children:d})]}),e.jsx("div",{className:"bg-[#1F1F1F] rounded-lg",children:e.jsxs("table",{className:"w-[20rem] table-auto text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 font-normal text-[#8C8C8C]",children:"Service"}),e.jsx("th",{className:"p-3 font-normal text-[#8C8C8C]",children:"Server"}),e.jsx("th",{className:"p-3 font-normal text-[#8C8C8C]",children:"Margin"}),e.jsx("th",{className:"p-3 font-normal text-[#8C8C8C]",children:"Action"})]})}),e.jsx("tbody",{children:f.map(({userId:{service:t,discount:a,server:s}})=>e.jsxs("tr",{children:[" ",e.jsx("td",{className:"border-t-2 border-[#4B4B4B] p-3",children:t}),e.jsx("td",{className:"border-t-2 border-[#4B4B4B] p-3",children:s}),e.jsx("td",{className:"border-t-2 border-[#4B4B4B] p-3",children:a}),e.jsx("td",{className:"border-t-2 border-[#4B4B4B] p-3",children:e.jsx(l,{onClick:()=>p(t,s),children:e.jsx(u.trash,{className:"w-4 h-4 text-red-600"})})})]},t+s))})]})}),e.jsx("div",{className:"flex w-full items-center justify-end",children:e.jsx(l,{variant:"link",className:"text-sm font-normal text-[#397CFF] !no-underline p-1 h-0",onClick:N,children:"+ Add Discount"})})]})})})]})},A=B()(v);export{A as default};
