import{A as z,r as l,u as Q,j as e,B as V,I as n,S as q,b as w,_ as u}from"./index--FpPv6_1.js";import{S as G,a as H,b as O,c as W,d as X,e as i}from"./Select-DDdZlMlL.js";import"./index-BzNKqasO.js";import"./index-DiOThvEn.js";const J=()=>{const[s,d]=l.useState(10),[a,c]=l.useState(1),[x,p]=l.useState(""),[C,v]=l.useState([]),[S,y]=l.useState("0.00"),[k,A]=l.useState("0"),[B,j]=l.useState(!0),f=Q(),L=()=>f("/"),g=localStorage.getItem("token");l.useEffect(()=>{(async()=>{try{const[r,F]=await Promise.all([w.get("/api/user/admin-api/all-users/get-all-users",{headers:{Authorization:`Bearer ${g}`}}),w.get("/api/user/admin-api/total-users/total-user-count",{headers:{Authorization:`Bearer ${g}`}})]),b=r.data.sort((m,h)=>new Date(h.createdAt)-new Date(m.createdAt)),R=b.reduce((m,h)=>m+h.balance,0);v(b),A(F.data.totalUserCount),y(R.toFixed(2)),j(!1)}catch(r){console.error("Error fetching data:",r),r.response?u.error(r.response.data.message||"Failed to update OTP check setting"):r.request?u.error("No response received from server"):u.error(`Error: ${r.message}`),j(!1)}})()},[]);const U=t=>{p(t.target.value),c(1)},D=()=>{p("")},P=t=>{d(Number(t)),c(1)},T=()=>{a*s<o.length&&c(a+1)},$=()=>{a>1&&c(a-1)},N=(a-1)*s,o=C.filter(t=>t.email.toLowerCase().includes(x.toLowerCase())),E=o.slice(N,N+s),I=t=>{f(`/users-data/${t}`)},_={wordBreak:"break-word",whiteSpace:"normal",overflowWrap:"break-word"};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full my-2 flex items-center justify-between",children:[e.jsxs(V,{variant:"link",onClick:L,className:"text-sm font-normal text-[#8C8C8C] !no-underline p-1 h-0 flex gap-2",children:[e.jsx(n.arrowLeft,{className:"w-4 h-4"})," User Data"]}),e.jsxs("div",{className:"flex items-center gap-2 font-normal",children:[e.jsx("p",{className:"text-sm text-[#8C8C8C]",children:"Limit:"}),e.jsx(K,{limit:s,onLimitChange:P})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsxs("p",{className:"text-[#A5A5A5] text-sm",children:["Total user:"," ",e.jsx("span",{className:"text-white font-normal text-xs",children:k})]}),e.jsxs("p",{className:"text-[#A5A5A5] text-sm",children:["Total Balance:"," ",e.jsxs("span",{className:"text-white font-normal text-xs",children:["â‚¹",S]})]})]}),e.jsxs("div",{className:"flex flex-col items-center pt-[1rem]",children:[e.jsxs("div",{className:"bg-transparent w-full max-w-md rounded-lg mb-[60px] border-none dark",children:[e.jsxs("div",{className:"w-full flex bg-[#18191c] rounded-2xl px-2 items-center justify-center h-[50px] mb-3",children:[e.jsx(n.search,{className:"w-4 h-4 text-primary"}),e.jsx("input",{type:"text",placeholder:"Search...",value:x,onChange:U,className:"w-[85%] h-[50px] ml-2 text-sm bg-transparent border-0 text-white placeholder:text-primary focus:outline-none"}),x!==""?e.jsx(n.circleX,{className:"text-primary cursor-pointer",onClick:D}):""]}),B?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx(q,{})}):e.jsx("div",{className:"overflow-y-auto max-h-[calc(100vh-18rem)] mb-2 text-left",children:e.jsxs("table",{className:"w-full table-auto text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 font-normal text-[#8C8C8C]",children:"SL No"}),e.jsx("th",{className:"p-3 font-normal text-[#8C8C8C]",children:"Email"})]})}),e.jsx("tbody",{children:E.map((t,r)=>e.jsxs("tr",{onClick:()=>I(t._id),className:"cursor-pointer hover:bg-[#292929]",children:[e.jsx("td",{className:"border-t-2 border-[#4B4B4B] p-3",children:(a-1)*s+r+1}),e.jsx("td",{className:"border-t-2 border-[#4B4B4B] p-3",style:_,children:t.email})]},t._id))})]})})]}),e.jsxs("div",{className:"w-full max-w-2xl mt-4 flex justify-center fixed bottom-0 p-4 bg-black",children:[e.jsx("button",{onClick:$,className:`px-4 py-2 ${a===1?"text-gray-500 cursor-not-allowed":""}`,disabled:a===1,children:e.jsx(n.left,{})}),e.jsx("button",{onClick:T,className:`px-4 py-2 ${a*s>=o.length?"text-gray-500 cursor-not-allowed":""}`,disabled:a*s>=o.length,children:e.jsx(n.right,{})})]})]})]})},se=z()(J),K=({limit:s,onLimitChange:d})=>e.jsxs(G,{value:String(s),onValueChange:d,children:[e.jsx(H,{className:"w-[px] dark bg-transparent",children:e.jsx(O,{children:s})}),e.jsx(W,{className:"dark bg-[#1e1e1e]",children:e.jsxs(X,{children:[e.jsx(i,{value:"10",children:"10"}),e.jsx(i,{value:"20",children:"20"}),e.jsx(i,{value:"30",children:"30"}),e.jsx(i,{value:"50",children:"50"})]})})]});export{se as default};
