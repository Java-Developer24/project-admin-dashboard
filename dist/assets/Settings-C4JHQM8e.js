import{A as Y,u as Z,r as a,j as e,B as l,I as ee,b as n,_ as s}from"./index--FpPv6_1.js";import{I as o}from"./Input-C-s0KhfE.js";import{L as i}from"./Label-B-Rr7N0l.js";import{S as F}from"./Switch-ClYcvtk9.js";import"./index-ny5ticeX.js";import"./index-DiOThvEn.js";import"./index-BzNKqasO.js";const te=()=>{const T=Z(),[B,f]=a.useState(""),[c,x]=a.useState("");a.useState(""),a.useState("");const[O,b]=a.useState(""),[m,g]=a.useState(""),[S,v]=a.useState(""),[p,w]=a.useState(""),[E,j]=a.useState(""),[u,y]=a.useState(""),[C,N]=a.useState(""),[h,P]=a.useState(""),[D,A]=a.useState(!1),[$,k]=a.useState(!1),z=()=>T("/admin-panel"),d=localStorage.getItem("token"),I=localStorage.getItem("tempEmail");a.useEffect(()=>{(async()=>{try{const[t,G,H,K,Q,V,X]=await Promise.all([n.get("/api/info/admin-api/get-info-banner/banner"),n.get("/api/user/admin-api/otp-timing-data/get-time",{headers:{Authorization:`Bearer ${d}`}}),n.get("/api/mfa/admin-api/admin-IP-data/get-admin-ip",{headers:{Authorization:`Bearer ${d}`}}),n.get("/api/server/admin-api/check-otp-data/get-check-otp",{headers:{Authorization:`Bearer ${d}`}}),n.post("/api/mfa/admin-api/admin-get-mfa-status/getMfastatus",{tempEmail:I},{headers:{Authorization:`Bearer ${d}`}}),n.get("/api/mfa/admin-api/admin-IP-data/get-admin-api-ip",{headers:{Authorization:`Bearer ${d}`}}),n.get("/api/mfa//admin-api/admin-IP-data/get-job-run-minute",{headers:{Authorization:`Bearer ${d}`}})]);f(t.data.message||""),b(G.data.otpTimeWindow||""),j(H.data.adminIp),A(K.data.status),k(Q.data.is2FAEnabled),N(V.data.apiadminIP),v(X.data.minute)}catch(t){console.error("Error fetching settings:",t),t.response?s.error(t.response.data.message||"Failed to update OTP check setting"):t.request?s.error("No response received from server"):s.error(`Error: ${t.message}`)}})()},[]);const R=async r=>{try{const t=await n.post("/api/server/admin-api/check-otp-update/update-check-otp",{checkOtp:r},{headers:{Authorization:`Bearer ${d}`}});A(r),s.success("OTP check setting updated successfully")}catch(t){console.error("Error updating OTP check setting:",t),t.response?s.error(t.response.data.message||"Failed to update OTP check setting"):t.request?s.error("No response received from server"):s.error(`Error: ${t.message}`)}},M=async r=>{try{await n.post("/api/mfa/admin-api/admin-mfa-off/disable",{mfaCheck:r,tempEmail:I},{headers:{Authorization:`Bearer ${d}`}}),k(r),s.success("Mfa  setting updated successfully")}catch(t){console.error("Error updating Mfa check setting:",t),t.response?s.error(t.response.data.message||"Failed to update OTP check setting"):t.request?s.error("No response received from server"):s.error(`Error: ${t.message}`)}},U=async r=>{r.preventDefault();try{await n.post("/api/info/admin-api/banner-data-update/update-banner",{banner:c},{headers:{Authorization:`Bearer ${d}`}}),f(c),x(""),s.success("Banner updated successfully")}catch(t){console.error("Error updating banner:",t),t.response?s.error(t.response.data.message||"Failed to update OTP check setting"):t.request?s.error("No response received from server"):s.error(`Error: ${t.message}`)}},q=async r=>{r.preventDefault();try{await n.post("/api/user/admin-api/otp-window-time-update/update-time",{time:m},{headers:{Authorization:`Bearer ${d}`}}),b(m),g(""),s.success("OTP check timing updated successfully")}catch(t){console.error("Error updating OTP time:",t),t.response?s.error(t.response.data.message||"Failed to update OTP check setting"):t.request?s.error("No response received from server"):s.error(`Error: ${t.message}`)}},J=async r=>{r.preventDefault();try{await n.post("/api/mfa/admin-api/admin-IP-update/update-job-run-minute",{minute:p},{headers:{Authorization:`Bearer ${d}`}}),v(p),w(""),s.success("Job Run timing updated successfully")}catch(t){console.error("Error updating Job Run time:",t),t.response?s.error(t.response.data.message||"Failed to update OTP check setting"):t.request?s.error("No response received from server"):s.error(`Error: ${t.message}`)}},L=async r=>{r.preventDefault();try{await n.post("/api/mfa/admin-api/admin-IP-update/update-admin-ip",{ip:u},{headers:{Authorization:`Bearer ${d}`}}),j(u),y(""),s.success("Admin IP updated successfully")}catch(t){console.error("Error updating Admin IP:",t),t.response?s.error(t.response.data.message||"Failed to update OTP check setting"):t.request?s.error("No response received from server"):s.error(`Error: ${t.message}`)}},_=async r=>{r.preventDefault();try{await n.post("/api/mfa/admin-api/admin-IP-update/update-admin-api-ip",{ip:h},{headers:{Authorization:`Bearer ${d}`}}),N(h),P(""),s.success("Admin IP updated successfully")}catch(t){console.error("Error updating API Admin IP:",t),t.response?s.error(t.response.data.message||"Failed to update OTP check setting"):t.request?s.error("No response received from server"):s.error(`Error: ${t.message}`)}},W=async()=>{try{const r=localStorage.getItem("token");s.success("Services data is being updated...");const t=await n.get("/api/service/admin-api/service-data-update/fetch-update-compare-services",{headers:{Authorization:`Bearer ${r}`}});t.status===200&&t.data.msg?s.success(t.data.msg):s.error("Unexpected response from the server.")}catch(r){console.error("Error fetching service data:",r),s.error("Failed to fetch and update service data.")}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full my-4 flex items-center justify-between",children:e.jsxs(l,{variant:"link",onClick:z,className:"text-sm font-normal text-[#8C8C8C] !no-underline p-1 h-0 flex gap-2",children:[e.jsx(ee.arrowLeft,{className:"w-4 h-4"})," Settings"]})}),e.jsx("div",{className:"flex items-center justify-center pt-[1rem]",children:e.jsxs("div",{className:"bg-transparent w-full max-w-md rounded-lg mb-[60px] border-none dark",children:[e.jsx("form",{onSubmit:U,className:"mb-8",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"currentBanner",className:"block text-base text-[#9d9d9d] font-normal py-3",children:"Current Banner"}),e.jsx("textarea",{id:"currentBanner",disabled:!0,className:"w-full h-24 pl-3 rounded-lg disabled:text-white disabled:!border-[#e0effe] focus:border-none disabled:opacity-100 disabled:bg-[#9D9D9D]/50",value:B||""})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"newBanner",className:"block text-base text-[#9d9d9d] font-normal py-3",children:"New Banner"}),e.jsx("textarea",{id:"newBanner",placeholder:"Enter new banner text",className:"w-full h-24 pl-3 rounded-lg text-[#9d9d9d] !placeholder-[#9d9d9d] bg-[#9D9D9D]/50 border-[#e0effe]  focus:border-none",value:c,onChange:r=>x(r.target.value)})]}),e.jsx("div",{className:"flex justify-center gap-4",children:e.jsx(l,{type:"submit",className:"py-1 px-8 text-xs bg-[#129BFF] text-white hover:bg-[#129BFF]",children:"Update Banner"})})]})}),e.jsx("form",{onSubmit:q,className:"mb-8",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"currentOtpTime",className:"block text-base text-[#9d9d9d] font-normal py-3",children:"Current OTP Check Time (seconds)"}),e.jsx(o,{id:"currentOtpTime",type:"text",disabled:!0,className:"w-full h-12 pl-3 rounded-lg disabled:text-white disabled:!border-[#e0effe] focus:border-none disabled:opacity-100 disabled:bg-[#9D9D9D]/50",value:O||""})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"newOtpTime",className:"block text-base text-[#9d9d9d] font-normal py-3",children:"New OTP Check Time (seconds)"}),e.jsx(o,{id:"newOtpTime",type:"number",placeholder:"Enter new OTP check time",className:"w-full h-12 pl-3 rounded-lg text-[#9d9d9d] !placeholder-[#9d9d9d] bg-transparent border-[#e0effe] focus:border-none",value:m,onChange:r=>g(r.target.value)})]}),e.jsx("div",{className:"flex justify-center gap-4",children:e.jsx(l,{type:"submit",className:"py-1 px-8 text-xs bg-[#129BFF] text-white hover:bg-[#129BFF]",children:"Update OTP Time"})})]})}),e.jsx("form",{onSubmit:J,className:"mb-8",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"currentOtpTime",className:"block text-base text-[#9d9d9d] font-normal py-3",children:"Current Job Run Time (Minutes)"}),e.jsx(o,{id:"currentOtpTime",type:"text",disabled:!0,className:"w-full h-12 pl-3 rounded-lg disabled:text-white disabled:!border-[#e0effe] focus:border-none disabled:opacity-100 disabled:bg-[#9D9D9D]/50",value:S||""})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"newOtpTime",className:"block text-base text-[#9d9d9d] font-normal py-3",children:"New Job Run Time (Minutes)"}),e.jsx(o,{id:"newOtpTime",type:"number",placeholder:"Enter new OTP check time",className:"w-full h-12 pl-3 rounded-lg text-[#9d9d9d] !placeholder-[#9d9d9d] bg-transparent border-[#e0effe] focus:border-none",value:p,onChange:r=>w(r.target.value)})]}),e.jsx("div",{className:"flex justify-center gap-4",children:e.jsx(l,{type:"submit",className:"py-1 px-8 text-xs bg-[#129BFF] text-white hover:bg-[#129BFF]",children:"Update OTP Time"})})]})}),e.jsx("form",{onSubmit:L,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"currentAdminIP",className:"block text-base text-[#9d9d9d] font-normal py-3",children:"Current Admin IP Address"}),e.jsx(o,{id:"currentAdminIP",type:"text",disabled:!0,className:"w-full h-12 pl-3 rounded-lg disabled:text-white disabled:!border-[#e0effe] focus:border-none disabled:opacity-100 disabled:bg-[#9D9D9D]/50",value:E||""})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"newAdminIP",className:"block text-base text-[#9d9d9d] font-normal py-3",children:"New Admin IP Address"}),e.jsx(o,{id:"newAdminIP",type:"text",placeholder:"Enter new admin IP address",className:"w-full h-12 pl-3 rounded-lg text-[#9d9d9d] !placeholder-[#9d9d9d] bg-transparent border-[#e0effe] focus:border-none",value:u,onChange:r=>y(r.target.value)})]}),e.jsx("div",{className:"flex justify-center gap-4",children:e.jsx(l,{type:"submit",className:"py-1 px-8 text-xs bg-[#129BFF] text-white hover:bg-[#129BFF]",children:"Update Admin IP"})})]})}),e.jsx("form",{onSubmit:_,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"currentAdminIP",className:"block text-base text-[#9d9d9d] font-normal py-3",children:"Admin IP Address For API"}),e.jsx(o,{id:"currentAdminIP",type:"text",disabled:!0,className:"w-full h-12 pl-3 rounded-lg disabled:text-white disabled:!border-[#e0effe] focus:border-none disabled:opacity-100 disabled:bg-[#9D9D9D]/50",value:C||""})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"newAdminIP",className:"block text-base text-[#9d9d9d] font-normal py-3",children:"New Admin IP Address"}),e.jsx(o,{id:"newAdminIP",type:"text",placeholder:"Enter new admin IP address",className:"w-full h-12 pl-3 rounded-lg text-[#9d9d9d] !placeholder-[#9d9d9d] bg-transparent border-[#e0effe] focus:border-none",value:h,onChange:r=>P(r.target.value)})]}),e.jsx("div",{className:"flex justify-center gap-4",children:e.jsx(l,{type:"submit",className:"py-1 px-8 text-xs bg-[#129BFF] text-white hover:bg-[#129BFF]",children:"Update Admin IP"})})]})}),e.jsx("div",{className:"w-full text-sm font-normal h-14 text-white !bg-[#282828] !hover:bg-[#282828] !justify-between !transform-none ounded-lg mb-[60px] border-none dark p-4 mt-8",children:e.jsxs("div",{className:"w-full flex items-center justify-between px-4 mb-8 ",children:[e.jsx("h5",{className:"w-full text-sm font-normal  text-white  !hover:bg-[#282828] !justify-between ",children:"Check OTP"}),e.jsx(F,{checked:D,onCheckedChange:R})]})}),e.jsx("div",{className:"w-full text-sm font-normal h-14 text-white !bg-[#282828] !hover:bg-[#282828] !justify-between !transform-none ounded-lg mb-[60px] border-none dark p-4 mt-8",children:e.jsxs("div",{className:"w-full flex items-center justify-between px-4 mb-8 ",children:[e.jsx("h5",{className:"w-full text-sm font-normal  text-white  !hover:bg-[#282828] !justify-between ",children:"MFA "}),e.jsx(F,{checked:$,onCheckedChange:M})]})}),e.jsxs("div",{className:"w-full text-xl font-normal h-14 text-white !bg-[#282828] !hover:bg-[#282828] !justify-between !transform-none ounded-lg mb-[60px] border-none dark p-4 mt-8",children:[e.jsx(i,{className:"w-full flex items-center justify-center mb-8 text-xl",children:"Fetch Services List"}),e.jsx("div",{className:"flex justify-center gap-4",children:e.jsx(l,{onClick:W,className:"bg-primary hover:bg-primary/90 text-white",children:"Services list"})})]})]})})]})},le=Y()(te);export{le as default};
